{
  "mappingId": "dynamic_dep_test",
  "sourceApi": "test-src",
  "targetApi": "test-tgt",
  "dependencies": ["/orders/*/type", "/meta/country"],
  "mappedFields": [
    {
      "source": "/orders/*/id",
      "target": "/result/*/orderId",
      "targetDataType": "string",
      "dependencies": {
        "/orders/*/type": "A",
        "/meta/country": "sg"
      }
    },
    {
      "source": "/orders/*/amount",
      "target": "/result/*/amt",
      "targetDataType": "integer",
      "dependencies": {
        "/orders/*/type": "A",
        "/meta/country": "sg"
      }
    }
  ]
}


{
  "orders": [
    { "type": "A", "id": "X1", "amount": "10" },
    { "type": "B", "id": "X2", "amount": "20" },
    { "type": "A", "id": "X3", "amount": "30" }
  ],
  "meta": { "country": "sg" }
}






{
  "result": [
    { "orderId": "X1", "amt": 10 },
    { "orderId": "X3", "amt": 30 }
  ]
}




{
  "mappingId": "nested_dep_test",
  "sourceApi": "test-src",
  "targetApi": "test-tgt",
  "dependencies": ["/groups/*/items/*/flag", "/meta/env"],
  "mappedFields": [
    {
      "source": "/groups/*/name",
      "target": "/out/*/groupName",
      "targetDataType": "string"
    },
    {
      "source": "/groups/*/items/*/code",
      "target": "/out/*/eligibleItems/*/code",
      "targetDataType": "string",
      "dependencies": {
        "/groups/*/items/*/flag": "Y",
        "/meta/env": "dev"
      }
    }
  ]
}




{
  "groups": [
    {
      "name": "G1",
      "items": [
        { "code": "I1", "flag": "Y" },
        { "code": "I2", "flag": "N" }
      ]
    },
    {
      "name": "G2",
      "items": [
        { "code": "I3", "flag": "Y" }
      ]
    }
  ],
  "meta": { "env": "dev" }
}






{
  "out": [
    { "groupName": "G1", "eligibleItems": [ { "code": "I1" } ] },
    { "groupName": "G2", "eligibleItems": [ { "code": "I3" } ] }
  ]
}

